{% extends 'base.html.twig' %}

{% block title %}{{ parent() }}Project{% endblock %}
{% block content %}

<div class="form-register row justify-content-sm-center align-content-center">
    <div id="concept" class="home-section container bg-light col-sm-10 rounded mb-5 p-4 shadow">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-sm-12">
                <h1 class="text-primary">Project List</h1>

    {% for project in projects %}
        <h3><a href="{{ path('project_show', {'id' : project.id}) }}">{{ project.title }} </a></h3>
        <h5> Project status :
                    {% if project.status == 0 %}
                        Not validated yet.
                    {% elseif project.status == 1 %}
                        Validated ! Needs some voluntaree.
                    {% elseif project.status == 2 %}
                        Opened.
                    {% elseif project.status == 3 %}
                        Closed.
                    {% endif %}
        </h5>
        <p>{{ project.description }}</p>
        <table>
            <tr>
                <td>
                    <span>SDG : </span>
                    {% for sdg in project.sdgs %}
                        <ul>
                            <li>
                                {{ sdg.name }}
                            </li>
                        </ul>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <td>
                {% if app.user %}
                  {% if app.user.isParticipantOn(project) %}
                      <p>Your demand was already sent</p>
                  {% else %}
                      <a href="{{ path('project_participant_project', {'project': project.id }) }}">Participe</a>
                  {% endif %}
                {% endif %}
                </td>
            </tr>
            <tr>
                <td><a href="{{ path('project_edit', {'id' : project.id}) }}"><button class="btn btn-primary">Edit the projet</button></a></td>
            </tr>
            <tr>
                <td>{{ include('project/_delete_form.html.twig') }}</td>
            </tr>
            <tr>
                <td>
                  {% if project.status != 3 %}
                    <form action="{{ path('status_closed', {'id' : project.id}) }}" method="post"><button class="btn btn-primary">Close the project</button></form>
                  {% endif %}
    {% endfor %}
        </table>
{% endblock %}